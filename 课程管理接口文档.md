# 课程管理系统接口文档

## 1. 概述

本文档描述了课程管理系统的API接口，包括已实现的接口和未实现的接口。后端主要使用Spring Boot + MyBatis开发，前端使用Vue 3 + Element Plus开发。

## 2. 数据结构

### 2.1 课程相关数据结构

#### 2.1.1 Course (课程)

```typescript
interface Course {
  courseId: number;            // 课程ID
  courseName: string;          // 课程名称
  courseCode: string;          // 课程编码
  categoryId: number;          // 分类ID
  instructorId: number;        // 授课教师ID
  description: string;         // 课程描述
  syllabus: string;            // 课程大纲
  creditHours: number;         // 学时
  creditValue: number;         // 学分值
  maxStudents: number;         // 最大学生数
  currentStudents: number;     // 当前学生数
  startDate: string;           // 开课日期
  endDate: string;             // 结课日期
  status: number;              // 状态：0-关闭，1-开放，2-满员
  createTime?: string;         // 创建时间
  updateTime?: string;         // 更新时间
}
```

#### 2.1.2 CourseChapter (课程章节)

```typescript
interface CourseChapter {
  chapterId: number;           // 章节ID
  courseId: number;            // 课程ID
  chapterName: string;         // 章节名称
  chapterOrder: number;        // 章节顺序
  description?: string;        // 章节描述
  sections: CourseSection[];   // 小节列表
}
```

#### 2.1.3 CourseSection (课程小节)

```typescript
interface CourseSection {
  sectionId: number;           // 小节ID
  chapterId: number;           // 章节ID
  sectionName: string;         // 小节名称
  resourceType: string;        // 资源类型：video, document, quiz等
  contentUrl?: string;         // 内容URL
  duration?: number;           // 时长（秒）
  status: string;              // 状态：not_started, in_progress, completed
  progress: number;            // 进度（百分比）
}
```

#### 2.1.4 CourseResource (课程资源)

```typescript
interface CourseResource {
  resourceId: number;          // 资源ID
  courseId: number;            // 课程ID
  resourceName: string;        // 资源名称
  resourceType: string;        // 资源类型：video, document, ppt等
  fileUrl?: string;            // 文件URL
  fileSize?: number;           // 文件大小（字节）
  duration?: number;           // 时长（秒，仅适用于视频）
  downloadCount: number;       // 下载次数
  createTime?: string;         // 创建时间
}
```

#### 2.1.5 LearningRecord (学习记录)

```typescript
interface LearningRecord {
  recordId: number;            // 记录ID
  userId: number;              // 用户ID
  courseId: number;            // 课程ID
  sectionId: number;           // 小节ID
  progress: number;            // 进度（百分比）
  duration: number;            // 学习时长（秒）
  lastPosition: number;        // 上次位置（秒）
  createTime: string;          // 创建时间
  updateTime: string;          // 更新时间
}
```

#### 2.1.6 CourseTest (课程测试)

```typescript
interface CourseTest {
  testId: number;              // 测试ID
  testName: string;            // 测试名称
  testType: string;            // 测试类型：quiz, assignment, exam
  courseId: number;            // 课程ID
  startTime: string;           // 开始时间
  endTime: string;             // 结束时间
  duration: number;            // 时长（分钟）
  questionCount: number;       // 问题数量
  totalScore: number;          // 总分
  status: string;              // 状态：not_started, in_progress, completed, expired
  score?: number;              // 得分
  questions?: TestQuestion[];  // 问题列表
}
```

#### 2.1.7 TestQuestion (测试问题)

```typescript
interface TestQuestion {
  questionId: number;              // 问题ID
  questionText: string;            // 问题文本
  type: string;                    // 问题类型：single, multiple, boolean, text
  options?: TestQuestionOption[];  // 选项列表
  answer?: string | string[] | boolean; // 答案
}
```

#### 2.1.8 TestQuestionOption (测试问题选项)

```typescript
interface TestQuestionOption {
  value: string;                   // 选项值
  text: string;                    // 选项文本
}
```

#### 2.1.9 PageResult (分页结果)

```typescript
interface PageResult<T> {
  list: T[];                      // 数据列表
  total: number;                  // 总记录数
  page: number;                   // 当前页码
  size: number;                   // 每页大小
}
```

## 3. API接口

### 3.1 课程基本管理接口

#### 3.1.1 获取课程列表

**请求方法**：GET

**请求路径**：`/courses/page`

**请求参数**：

| 参数名     | 类型   | 是否必须 | 默认值 | 说明               |
| ---------- | ------ | -------- | ------ | ------------------ |
| page       | int    | 否       | 1      | 页码               |
| size       | int    | 否       | 10     | 每页大小           |
| courseName | string | 否       | -      | 课程名称（模糊查询）|
| categoryId | long   | 否       | -      | 分类ID             |
| status     | int    | 否       | -      | 状态               |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "list": [Course对象数组],
    "total": 100,
    "page": 1,
    "size": 10
  }
}
```

**实现状态**：已实现

#### 3.1.2 获取课程详情

**请求方法**：GET

**请求路径**：`/courses/{courseId}`

**请求参数**：

| 参数名   | 类型 | 是否必须 | 默认值 | 说明    |
| -------- | ---- | -------- | ------ | ------- |
| courseId | long | 是       | -      | 课程ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": Course对象
}
```

**实现状态**：已实现

#### 3.1.3 创建课程

**请求方法**：POST

**请求路径**：`/courses/create`

**请求参数**：Course对象（不包含courseId, createTime, updateTime）

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": Course对象（包含生成的courseId）
}
```

**实现状态**：已实现

#### 3.1.4 更新课程

**请求方法**：PUT

**请求路径**：`/courses/{courseId}`

**请求参数**：

| 参数名   | 类型   | 是否必须 | 默认值 | 说明    |
| -------- | ------ | -------- | ------ | ------- |
| courseId | long   | 是       | -      | 课程ID  |
| body     | Course | 是       | -      | 课程对象|

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": Course对象（更新后）
}
```

**实现状态**：已实现

#### 3.1.5 删除课程

**请求方法**：DELETE

**请求路径**：`/courses/{courseId}`

**请求参数**：

| 参数名   | 类型 | 是否必须 | 默认值 | 说明    |
| -------- | ---- | -------- | ------ | ------- |
| courseId | long | 是       | -      | 课程ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": null
}
```

**实现状态**：已实现

### 3.2 课程报名接口

#### 3.2.1 报名课程

**请求方法**：POST

**请求路径**：`/courses/{courseId}/enroll`

**请求参数**：

| 参数名   | 类型 | 是否必须 | 默认值 | 说明    |
| -------- | ---- | -------- | ------ | ------- |
| courseId | long | 是       | -      | 课程ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": null
}
```

**实现状态**：部分实现，缺少用户报名记录的保存

#### 3.2.2 退出课程

**请求方法**：POST

**请求路径**：`/courses/{courseId}/withdraw`

**请求参数**：

| 参数名   | 类型 | 是否必须 | 默认值 | 说明    |
| -------- | ---- | -------- | ------ | ------- |
| courseId | long | 是       | -      | 课程ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": null
}
```

**实现状态**：部分实现，缺少用户报名记录的删除

### 3.3 课程章节与内容接口

#### 3.3.1 获取课程章节

**请求方法**：GET

**请求路径**：`/courses/{courseId}/chapters`

**请求参数**：

| 参数名   | 类型 | 是否必须 | 默认值 | 说明    |
| -------- | ---- | -------- | ------ | ------- |
| courseId | long | 是       | -      | 课程ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": [CourseChapter对象数组]
}
```

**实现状态**：未实现，当前使用模拟数据

#### 3.3.2 获取课程资源

**请求方法**：GET

**请求路径**：`/courses/{courseId}/resources`

**请求参数**：

| 参数名   | 类型   | 是否必须 | 默认值 | 说明           |
| -------- | ------ | -------- | ------ | -------------- |
| courseId | long   | 是       | -      | 课程ID         |
| page     | int    | 否       | 1      | 页码           |
| size     | int    | 否       | 10     | 每页大小       |
| type     | string | 否       | -      | 资源类型       |
| keyword  | string | 否       | -      | 关键词(模糊查询)|

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "list": [CourseResource对象数组],
    "total": 100,
    "page": 1,
    "size": 10
  }
}
```

**实现状态**：未实现，当前使用模拟数据

#### 3.3.3 下载资源（未在控制器中实现）

**请求方法**：GET

**请求路径**：`/courses/resources/{resourceId}/download`

**请求参数**：

| 参数名     | 类型 | 是否必须 | 默认值 | 说明    |
| ---------- | ---- | -------- | ------ | ------- |
| resourceId | long | 是       | -      | 资源ID  |

**响应结果**：文件流

**实现状态**：未实现

### 3.4 学习记录接口

#### 3.4.1 保存学习进度

**请求方法**：POST

**请求路径**：`/courses/learning/progress`

**请求参数**：

```json
{
  "courseId": 1,
  "sectionId": 101,
  "progress": 75,
  "duration": 600,
  "lastPosition": 450
}
```

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": null
}
```

**实现状态**：未实现，后端方法仅有声明

#### 3.4.2 获取学习记录

**请求方法**：GET

**请求路径**：`/courses/{courseId}/learning/records`

**请求参数**：

| 参数名   | 类型 | 是否必须 | 默认值 | 说明    |
| -------- | ---- | -------- | ------ | ------- |
| courseId | long | 是       | -      | 课程ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": [LearningRecord对象数组]
}
```

**实现状态**：未实现，后端方法仅有声明

### 3.5 测试与作业接口

#### 3.5.1 获取课程测试

**请求方法**：GET

**请求路径**：`/courses/{courseId}/tests`

**请求参数**：

| 参数名   | 类型 | 是否必须 | 默认值 | 说明    |
| -------- | ---- | -------- | ------ | ------- |
| courseId | long | 是       | -      | 课程ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": [CourseTest对象数组]
}
```

**实现状态**：未实现，后端方法仅有声明

#### 3.5.2 获取测试详情

**请求方法**：GET

**请求路径**：`/courses/tests/{testId}`

**请求参数**：

| 参数名 | 类型 | 是否必须 | 默认值 | 说明    |
| ------ | ---- | -------- | ------ | ------- |
| testId | long | 是       | -      | 测试ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": CourseTest对象（包含questions数组）
}
```

**实现状态**：未实现，后端方法仅有声明

#### 3.5.3 提交测试

**请求方法**：POST

**请求路径**：`/courses/tests/{testId}/submit`

**请求参数**：

| 参数名  | 类型                | 是否必须 | 默认值 | 说明         |
| ------- | ------------------- | -------- | ------ | ------------ |
| testId  | long                | 是       | -      | 测试ID       |
| answers | Map<String, Object>[]| 是      | -      | 答案列表     |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "score": 85,
    "totalScore": 100,
    "correctCount": 17,
    "totalCount": 20
  }
}
```

**实现状态**：未实现，后端方法仅有声明

### 3.6 笔记接口

#### 3.6.1 保存笔记

**请求方法**：POST

**请求路径**：`/courses/notes/save`

**请求参数**：

```json
{
  "courseId": 1,
  "sectionId": 101,
  "content": "笔记内容..."
}
```

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": null
}
```

**实现状态**：未实现，后端方法仅有声明

#### 3.6.2 获取笔记

**请求方法**：GET

**请求路径**：`/courses/notes`

**请求参数**：

| 参数名    | 类型 | 是否必须 | 默认值 | 说明    |
| --------- | ---- | -------- | ------ | ------- |
| courseId  | long | 否       | -      | 课程ID  |
| sectionId | long | 否       | -      | 小节ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": [
    {
      "noteId": 1,
      "userId": 1,
      "courseId": 1,
      "sectionId": 101,
      "content": "笔记内容...",
      "createTime": "2023-06-01 10:00:00",
      "updateTime": "2023-06-01 10:30:00"
    }
  ]
}
```

**实现状态**：未实现，后端方法仅有声明

### 3.7 统计与报表接口

#### 3.7.1 获取课程统计信息

**请求方法**：GET

**请求路径**：`/courses/{courseId}/statistics`

**请求参数**：

| 参数名   | 类型 | 是否必须 | 默认值 | 说明    |
| -------- | ---- | -------- | ------ | ------- |
| courseId | long | 是       | -      | 课程ID  |

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "enrollCount": 25,
    "completeCount": 15,
    "averageProgress": 68,
    "averageScore": 82.5
  }
}
```

**实现状态**：未实现，后端方法仅有声明

#### 3.7.2 获取已报名课程

**请求方法**：GET

**请求路径**：`/courses/enrolled`

**请求参数**：无

**响应结果**：

```json
{
  "code": 0,
  "msg": "success",
  "data": [
    {
      "courseId": 1,
      "courseName": "Java高级编程",
      "courseCode": "CS001",
      "progress": 75,
      "startDate": "2023-06-01",
      "endDate": "2023-08-01",
      "status": 1
    }
  ]
}
```

**实现状态**：未实现，后端方法仅有声明

## 4. 数据库表结构（需要补充）

### 4.1 课程相关表

#### 4.1.1 course（课程表）

| 字段名          | 类型        | 是否主键 | 是否为空 | 说明               |
| --------------- | ----------- | -------- | -------- | ------------------ |
| course_id       | bigint      | 是       | 否       | 课程ID             |
| course_name     | varchar(100)| 否       | 否       | 课程名称           |
| course_code     | varchar(50) | 否       | 否       | 课程编码           |
| category_id     | bigint      | 否       | 是       | 分类ID             |
| instructor_id   | bigint      | 否       | 是       | 教师ID             |
| description     | text        | 否       | 是       | 课程描述           |
| syllabus        | text        | 否       | 是       | 课程大纲           |
| credit_hours    | int         | 否       | 否       | 学时               |
| credit_value    | decimal(5,2)| 否       | 否       | 学分值             |
| max_students    | int         | 否       | 否       | 最大学生数         |
| current_students| int         | 否       | 否       | 当前学生数         |
| start_date      | date        | 否       | 是       | 开课日期           |
| end_date        | date        | 否       | 是       | 结课日期           |
| status          | tinyint     | 否       | 否       | 状态               |
| create_time     | datetime    | 否       | 否       | 创建时间           |
| update_time     | datetime    | 否       | 否       | 更新时间           |

#### 4.1.2 course_chapter（课程章节表）

需要实现

#### 4.1.3 course_section（课程小节表）

需要实现

#### 4.1.4 course_resource（课程资源表）

需要实现

#### 4.1.5 user_course（用户课程关系表）

需要实现

#### 4.1.6 learning_record（学习记录表）

需要实现

#### 4.1.7 course_test（课程测试表）

需要实现

#### 4.1.8 test_question（测试问题表）

需要实现

#### 4.1.9 user_answer（用户答题记录表）

需要实现

#### 4.1.10 course_note（课程笔记表）

需要实现

## 5. 未实现功能清单

1. **数据库设计**：
   - 需要完成除课程表(course)外的所有表的设计与创建

2. **后端功能**：
   - 完成课程章节管理功能，实现`getCourseChapters`方法
   - 完成课程资源管理功能，实现`getCourseResources`方法
   - 完成学习记录管理功能，实现`saveLearningProgress`和`getLearningRecords`方法
   - 完成课程测试功能，实现`getCourseTests`、`getTestDetail`和`submitTest`方法
   - 完成课程笔记功能，实现`saveNote`和`getNotes`方法
   - 完成课程统计功能，实现`getCourseStatistics`和`getEnrolledCourses`方法
   - 完善课程报名功能，添加用户报名记录的保存与删除

3. **前端功能**：
   - 替换模拟数据，接入真实API
   - 完善课程资源组件功能
   - 完善课程学习进度记录功能
   - 完善课程测试与作业功能
   - 添加课程分类管理
   - 实现文档预览功能
   - 实现视频播放器进度记录功能

4. **功能优化**：
   - 添加用户权限控制，区分学生和教师权限
   - 添加教师管理课程的功能
   - 添加课程推荐算法
   - 添加学习数据统计与分析功能 